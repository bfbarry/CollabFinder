{% extends "base.html" %}
{% block content %}
<p>HELLO</p>
    <h1>Hi, {{ current_user.username }}!</h1>
    <form action="" method="post">
        {{ form.hidden_tag() }} <!-- PROJECT CREATION FORM -->
        <p>
            {{ form.name.label }}<br>            <!-- input label --> 
            {{ form.name(cols=32, rows=4) }}<br>  <!-- user input --> 
            {% for error in form.name.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
            
            {{ form.category.label }}<br>            <!-- input label --> 
            {{ form.category(cols=32, rows=4) }}<br>  <!-- user input --> 
            {% for error in form.category.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
            
            {{ form.descr.label }}<br>            
            {{ form.descr(cols=32, rows=4) }}<br> 
            {% for error in form.descr.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
            
            <div id = "learning" style="margin:0 auto; display:none;">
                {{ form.learning_category.label }}<br>            
                {{ form.learning_category(cols=32, rows=4) }}<br> 
                {% for error in form.learning_category.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
            
            <div id = "software" style="margin:0 auto; display:none;">
                {{ form.lang.label }}<br>            
                {{ form.lang(cols=32, rows=4) }}<br> 
                {% for error in form.lang.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>

        </p>
        <p>{{ form.submit() }}</p>
    </form>
    
    <!-- User feed -->
    {% for project in projects %}
    <div><p>{{ project.creator.username }} says: <b>{{ project.name }}</b></p></div>
    {% endfor %}
    
<script type="text/javascript">
    // Show and hide category specific form fields
    $(document).ready(function() {
        $("#category").change(function () { // detecting change in category drop down
            let cat_list  = ['learning', 'software']; 
            var val = $(this).val();
            for (i = 0; i < cat_list.length; i++) {
                if (val == cat_list[i]) {
                    $('#' + cat_list[i]).show();
                    for (c = 0; c < cat_list.length; c++) {
                        if (val != cat_list[c]) {
                            $('#' + cat_list[c]).hide();
                        }
                    }
                }
            }
            
            // if (val == "software development") {
            //     $("#software").show();
            //     $("#learning").hide(); 

            //     //hide other category forms?
            // }
            // else if (val == "learning"){
            //     $("#learning").show(); 
            //     $("#software").hide(); 
            // }
            // else {
            //     $("#learning").hide(); 
            //     $("#software").hide();
            // }
            }); 
            
        });     

</script>
{% endblock %}
    
